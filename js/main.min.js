!function(){var t=function(t){if(this.default_ops={todoNode:document.getElementById("todoList"),doneNode:document.getElementById("doneList")},t)for(var e in t)t.hasOwnProperty(e)&&(this.default_ops[e]=t[e]);this.todoData=null,this.todoNum=0,this.doneNum=0};t.prototype={init:function(){JSON.parse(localStorage.getItem("todo"))?this.todoData=JSON.parse(localStorage.getItem("todo")):this.todoData=[];for(var t=0;t<this.todoData.length;t++)this.todoData[t].done?(this.add({type:"done",value:this.todoData[t].title,timestamp:this.todoData[t].timestamp}),this.doneNum++,this.numChange()):(this.add({type:"todo",value:this.todoData[t].title,timestamp:this.todoData[t].timestamp}),this.todoNum++,this.numChange())},add:function(t){var e=document.createElement("li"),o=document.createElement("input"),a=document.createElement("p"),d=document.createElement("a");e.className="item",o.type="checkbox",d.href="javascript:;",d.className="btn",d.classList.add("btn-delete","fr"),d.innerHTML="X",a.innerHTML=t.value,e.appendChild(o),e.appendChild(a),e.appendChild(d),o.setAttribute("data-timestamp",t.timestamp),d.setAttribute("data-timestamp",t.timestamp),e.setAttribute("data-timestamp",t.timestamp),"todo"===t.type?this.default_ops.todoNode.appendChild(e):"done"===t.type&&(o.checked="checked",this.default_ops.doneNode.appendChild(e))},delete:function(t,e){"todo"===t?this.default_ops.todoNode.removeChild(e):"done"===t&&this.default_ops.doneNode.removeChild(e)},numChange:function(){for(var t=document.getElementsByClassName("num"),e=0;e<t.length;e++)t[e].classList.contains("todoNum")?t[e].innerHTML=this.todoNum:t[e].classList.contains("doneNum")?t[e].innerHTML=this.doneNum:console.log("找不到元素")},saveData:function(t){var e={};"todo"===t.type?(e.title=t.value,e.done=!1,e.timestamp=t.timestamp,this.todoData.push(e)):"done"===t.type?(e.title=t.value,e.done=!0,e.timestamp=t.timestamp,this.todoData.push(e)):console.log("error:储存名称错误!"),localStorage.setItem("todo",JSON.stringify(this.todoData))},deleteData:function(t){for(var e=0;e<this.todoData.length;e++)"done"===t.type&&this.todoData[e].done&&this.todoData[e].timestamp===t.timestamp?this.todoData.splice(e,1):"todo"!==t.type||this.todoData[e].done||this.todoData[e].timestamp!==t.timestamp?console.log("找不到记录"):this.todoData.splice(e,1);localStorage.setItem("todo",JSON.stringify(this.todoData))}},window.Todo=t}();